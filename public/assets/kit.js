(function(a){a.KitTitle=function(d){var c=a.Component({id:"kit-title"},d);var g,b,f,h;function e(){b.click(function(){g.hide();f.show();h.val(g.attr("data-val")).focus()});h.blur(function(){var i=h.val();if(i){b.text(i);g.attr("data-val",i)}g.show();f.hide()})}c.oninit=function(){g=$(".k-kit-title-label");f=$(".k-kit-title-input");b=$(".k-kit-title-label h1");h=$("input",f);e()};return c.pub}})(Kitify);(function(a){a.NewItem=function(c){var b=a.Component({id:"newitem",fields:[{id:"newitem-name",prop:"name",required:true},{id:"newitem-quantity",prop:"quantity",required:true},{id:"newitem-merchanturl",prop:"merchant_url",required:true},{id:"newitem-price",prop:"price",required:true},{id:"newitem-notes",prop:"notes"}]},c);function d(){$.each(b.options.fields,function(e,f){$("#"+f.id).val("")})}b.oninit=function(){var e=$("#kit").attr("data-id");$("#kit-add-btn").click(function(){var g=true,f={kit_id:e};$.each(b.options.fields,function(h,k){var j=$("#"+k.id);var l=j.val();if(k.required&&!l){g=false;j.addClass("error")}f[k.prop]=j.val()});if(g){a.Data.save("/items",f,function(h){d();$(a).trigger("item-added",[h])})}})};return b.pub}})(Kitify);(function(a){a.EditItem=function(d){var b=a.Component({id:"edititem"},d);var c,e;b.oninit=function(){c=$("#kit-items");e=$(".k-kit-ctrls");$(document).on("hover","#kit-items tbody tr",function(f){if(f.type==="mouseenter"){e.appendTo($(".k-kit-items-anchor",this)).show()}else{e.hide()}});$(".k-kit-ctrls-edit",e).click(function(){});$(".k-kit-ctrls-delete",e).click(function(){e.hide();var f=$(this).parents("tr");var g=f.attr("data-id");if(g){a.Data.del("/items/"+g,function(h){f.fadeOut(function(){e.appendTo("#kit");f.remove()})})}})};return b.pub}})(Kitify);(function(a){a.Kit=function(d){var b=a.Component({id:"kit",components:{}},d);var c;var e=['<tr data-id="{{id}}">','<td class="k-kit-items-name">{{name}}</td>',"<td>{{quantity}}</td>","<td>{{merchant_url}}</td>","<td>{{price}}</td>",'<td><div class="k-kit-items-anchor">{{notes}}</div></td>',"</tr>"].join("");b.oninit=function(){c=$("#"+b.options.id+"-items");if($("#"+b.options.id).hasClass("editable")){$.each(b.options.components,function(f,g){g.init(b.pub)})}$(a).bind("item-added",function(f,g){$(".k-kit-items-none",c).remove();var h=a.template(e,g);$("tbody",c).append(h)})};return b.pub}})(Kitify);