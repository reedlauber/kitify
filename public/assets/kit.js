(function(a){a.KitTitle=function(d){var c=a.Component({id:"kit-title"},d);var g,b,f,h;function e(){b.click(function(){g.hide();f.show();h.val(g.attr("data-val")).focus()});h.blur(function(){var i=h.val();if(i){b.text(i);g.attr("data-val",i)}g.show();f.hide()})}c.oninit=function(){g=$(".k-kit-title-label");f=$(".k-kit-title-input");b=$(".k-kit-title-label h1");h=$("input",f);e()};return c.pub}})(Kitify);(function(a){a.NewItem=function(c){var b=a.Component({id:"newitem",fields:[{id:"newitem-name",prop:"name",required:true},{id:"newitem-quantity",prop:"quantity",required:true},{id:"newitem-merchanturl",prop:"merchant_url",required:true},{id:"newitem-price",prop:"price",required:true},{id:"newitem-notes",prop:"notes"}]},c);function e(){$.each(b.options.fields,function(f,g){$("#"+g.id).val("")})}function d(){var f=false;$.each(b.options.fields,function(g,k){var h=$("#"+k.id).removeClass("error"),j=true,l=h.val();if(k.required&&!l){j=false}if(!j){h.addClass("error")}f=f&&j});return f}a.Form.validators["newitem-quantity"]=function(g,i,h){var f=parseInt(i,10);if(!$.isNumeric(f)){a.Form.addValidationMsg("<strong>Quantity</strong> must be a number.");return false}if(i<=0){a.Form.addValidationMsg("<strong>Quantity</strong> must be a positive number.");return false}return true};a.Form.validators["newitem-price"]=function(g,i,h){var f=parseFloat(i);if(!$.isNumeric(f)){a.Form.addValidationMsg("<strong>Price</strong> must be a dollar amount.");return false}if(f<0){a.Form.addValidationMsg("<strong>Price</strong> must be a positive dollar amount.");return false}return true};b.oninit=function(){var g=$("#kit").attr("data-id");var f=a.Form.setup({context:"#newitem",btns:{submit:"#kit-add-btn"}});$(f).bind("form-submitted",function(h,i){i.kit_id=g;console.log(i);return;a.Data.save("/items",i,function(j){e();$(a).trigger("item-added",[j])})})};return b.pub}})(Kitify);(function(a){a.EditItem=function(d){var b=a.Component({id:"edititem"},d);var c,e;b.oninit=function(){c=$("#kit-items");e=$(".k-kit-ctrls");$(document).on("hover","#kit-items tbody tr",function(f){if(f.type==="mouseenter"){e.appendTo($(".k-kit-items-anchor",this)).show()}else{e.hide()}});$(".k-kit-ctrls-edit",e).click(function(){});$(".k-kit-ctrls-delete",e).click(function(){e.hide();var f=$(this).parents("tr");var g=f.attr("data-id");if(g){a.Data.del("/items/"+g,function(h){f.fadeOut(function(){e.appendTo("#kit");f.remove()})})}})};return b.pub}})(Kitify);(function(a){a.Kit=function(d){var b=a.Component({id:"kit",components:{}},d);var c;var f=['<tr data-id="{{id}}">','<td class="k-kit-items-name">{{name}}</td>',"<td>{{quantity}}</td>",'<td class="k-kit-items-url"><a href="{{merchant_url}}" target="_blank">{{merchant_url}}</a></td>',"<td>{{price}}</td>",'<td><div class="k-kit-items-anchor">{{notes}}</div></td>',"</tr>"].join("");function e(g){var h=$.extend(true,{},g);if(typeof g.price==="number"){h.price="$"+g.price.toFixed(2)}return h}b.oninit=function(){c=$("#"+b.options.id+"-items");if($("#"+b.options.id).hasClass("editable")){$.each(b.options.components,function(g,h){h.init(b.pub)})}$(a).bind("item-added",function(g,h){$(".k-kit-items-none",c).remove();var i=e(h);var j=a.template(f,i);$("tbody",c).append(j)})};return b.pub}})(Kitify);